{% extends "base.html" %}
{% block title %}{{ course.short_name }} | Layup List{% endblock %}
{% block content %}
<div class="row">
    <div class="col-md-12">
        <h1> {{ course }} </h1>
        {% if course.is_offered %} <h4>Offered {{ term }} ({{ course.offered_times }})</h4> {% endif %}
        {% if course.description %} <p> {{ course.description }} </p> {% endif %}
        {% if xlist %}
            <p>
                Crosslisted with
                {% for x in xlist %}
                    <a href="{{ x.get_absolute_url }}">{{ x.short_name }}</a>
                {% endfor %}
            </p>
        {% endif %}
        {% if course.url %} <p><a href="{{ course.url }}">View on ORC.</a></p> {% endif %}
        {% if distribs_string %} <p> Distribs: {{ distribs_string }} </p> {% endif %}
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <h3>Medians</h3>
        <div class="median-chart"></div>
    </div>
</div>
<div class="row">
    <div class="col-md-2 col-md-offset-2 text-center score-box">
        <h2>{{ course.layup_score }}</h2>
        <p>called it a layup</p>
    </div>
    <div class="col-md-2 col-md-offset-4 text-center score-box">
        <h2>{{ course.quality_score }}</h2>
        <p>said it was a good class</p>
    </div>
</div>
<p></p>
<div id="reviews" class="row">
    <div class="col-md-12">
        <div class="row">
            <div class="col-md-9">
                <h3>Reviews ({{ reviews.paginator.count }})</h3>
            </div>
            <div class="col-md-3">
                <form class="course-review-search" action="{% url 'course_review_search' course.id %}" method="get" role="search">
                    <div class="form-group">
                        <div class="input-group">
                            <input name="q" type="text" class="form-control" placeholder="Review search...">
                            <span class="input-group-btn">
                                <button type="submit" class="btn btn-default">Search</button>
                            </span>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        {% if reviews %}
        <table class="table table-striped">
            <tbody>
                {% for review in reviews %}
                    <tr><td>
                        {% if review.term %}
                            <b>{{ review.term }}:</b>
                        {% endif %}
                        {{ review.comments }}
                    </td></tr>
                {% endfor %}
            </tbody>
        </table>
        <nav>
            <ul class="pager">
                {% if reviews.has_previous %}
                    <li><a href="{% url 'course_detail' course.id %}?page={{ reviews.previous_page_number }}#reviews"><span aria-hidden="true">&larr;</span> Previous</a></li>
                {% else %}
                    <li class="disabled"><a><span aria-hidden="true">&larr;</span> Previous</a></li>
                {% endif %}

                <li>{{ reviews.number }} of {{ reviews.paginator.num_pages }}</li>

                {% if reviews.has_next %}
                    <li><a href="{% url 'course_detail' course.id %}?page={{ reviews.next_page_number }}#reviews">Next <span aria-hidden="true">&rarr;</span></a></li>
                {% else %}
                    <li class="disabled"><a>Next <span aria-hidden="true">&rarr;</span></a></li>
                {% endif %}
            </ul>
        </nav>
        {% else %}
            <p>No reviews found</p>
        {% endif %}
    </div>
</div>

{% endblock %}
